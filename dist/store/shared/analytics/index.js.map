{"version":3,"sources":["../../../../src/store/shared/analytics/index.js"],"names":["googleAnalytics","onPageLoad","state","app","currentPage","productDetails","productFilter","cart","type","productView","product","search","searchText","path","checkoutView","order","pageView","title","viewItem","length","addCartItem","item","addToCart","deleteCartItem","itemId","removeFromCart","items","beginCheckout","checkoutSuccess","purchase","findMethodById","methodId","allMethods","find","m","id","setPaymentMethod","method","setCheckoutOption","step","option","value","name","setShippingMethod"],"mappings":"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","file":"index.js","sourcesContent":["import {\n\tPAGE,\n\tPRODUCT_CATEGORY,\n\tPRODUCT,\n\tRESERVED,\n\tSEARCH\n} from '../pageTypes';\nimport * as googleAnalytics from './googleAnalytics';\n\nexport const onPageLoad = ({ state }) => {\n\tconst { currentPage, productDetails, productFilter, cart } = state.app;\n\n\tswitch (currentPage.type) {\n\t\tcase PRODUCT:\n\t\t\tproductView({ product: productDetails });\n\t\t\tbreak;\n\t\tcase SEARCH:\n\t\t\tsearch({ searchText: productFilter.search });\n\t\t\tbreak;\n\t\tcase PAGE:\n\t\t\tif (currentPage.path === '/checkout') {\n\t\t\t\tcheckoutView({ order: cart });\n\t\t\t}\n\t\t\tbreak;\n\t}\n};\n\nexport const pageView = ({ path, title }) => {\n\tgoogleAnalytics.pageView({ path, title });\n};\n\nexport const productView = ({ product }) => {\n\tgoogleAnalytics.viewItem({ product });\n};\n\nexport const search = ({ searchText }) => {\n\tif (searchText && searchText.length > 0) {\n\t\tgoogleAnalytics.search({ searchText });\n\t}\n};\n\nexport const addCartItem = ({ item, cart }) => {\n\tgoogleAnalytics.addToCart({ item, cart });\n};\n\nexport const deleteCartItem = ({ itemId, cart }) => {\n\tgoogleAnalytics.removeFromCart({ itemId, cart });\n};\n\nexport const checkoutView = ({ order }) => {\n\tif (order && order.items && order.items.length > 0) {\n\t\tgoogleAnalytics.beginCheckout({ order });\n\t}\n};\n\nexport const checkoutSuccess = ({ order }) => {\n\tif (order && order.items && order.items.length > 0) {\n\t\tgoogleAnalytics.purchase({ order });\n\t}\n};\n\nconst findMethodById = ({ methodId, allMethods }) => {\n\tif (methodId && allMethods && allMethods.length > 0) {\n\t\treturn allMethods.find(m => m.id === methodId);\n\t} else {\n\t\treturn null;\n\t}\n};\n\nexport const setPaymentMethod = ({ methodId, allMethods }) => {\n\tconst method = findMethodById({ methodId, allMethods });\n\tif (method) {\n\t\tgoogleAnalytics.setCheckoutOption({\n\t\t\tstep: 1,\n\t\t\toption: 'payment method',\n\t\t\tvalue: method.name\n\t\t});\n\t}\n};\n\nexport const setShippingMethod = ({ methodId, allMethods }) => {\n\tconst method = findMethodById({ methodId, allMethods });\n\tif (method) {\n\t\tgoogleAnalytics.setCheckoutOption({\n\t\t\tstep: 1,\n\t\t\toption: 'shipping method',\n\t\t\tvalue: method.name\n\t\t});\n\t}\n};\n"]}