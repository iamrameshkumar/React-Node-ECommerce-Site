{"version":3,"sources":["../../../src/store/server/themeLocales.js"],"names":["THEME_LOCALES_PATH","text","getText","Promise","resolve","filePath","locale","reject","readFile","err","data","error","JSON","parse"],"mappings":";;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,qBAAqB,gBAA3B;AACA,IAAIC,OAAO,IAAX;;AAEO,IAAMC,4BAAU,SAAVA,OAAU,SAAU;AAChC,KAAID,IAAJ,EAAU;AACT,SAAOE,QAAQC,OAAR,CAAgBH,IAAhB,CAAP;AACA,EAFD,MAEO;AACN,MAAMI,WAAW,eAAKD,OAAL,CAAaJ,qBAAqBM,MAArB,GAA8B,OAA3C,CAAjB;AACA,SAAO,IAAIH,OAAJ,CAAY,UAACC,OAAD,EAAUG,MAAV,EAAqB;AACvC,gBAAGC,QAAH,CAAYH,QAAZ,EAAsB,MAAtB,EAA8B,UAACI,GAAD,EAAMC,IAAN,EAAe;AAC5C,QAAID,GAAJ,EAAS;AACR,uBAAQE,KAAR,CAAc,2BAAd,EAA2CN,QAA3C,EAAqDI,GAArD;AACAF,YAAOE,GAAP;AACA,KAHD,MAGO;AACNR,YAAOW,KAAKC,KAAL,CAAWH,IAAX,CAAP;AACAN,aAAQH,IAAR;AACA;AACD,IARD;AASA,GAVM,CAAP;AAWA;AACD,CAjBM","file":"themeLocales.js","sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport winston from 'winston';\n\nconst THEME_LOCALES_PATH = 'theme/locales/';\nlet text = null;\n\nexport const getText = locale => {\n\tif (text) {\n\t\treturn Promise.resolve(text);\n\t} else {\n\t\tconst filePath = path.resolve(THEME_LOCALES_PATH + locale + '.json');\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tfs.readFile(filePath, 'utf8', (err, data) => {\n\t\t\t\tif (err) {\n\t\t\t\t\twinston.error('Fail to read theme locale', filePath, err);\n\t\t\t\t\treject(err);\n\t\t\t\t} else {\n\t\t\t\t\ttext = JSON.parse(data);\n\t\t\t\t\tresolve(text);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n};\n"]}