{"version":3,"sources":["../../../src/store/server/robotsRendering.js"],"names":["ROBOTS_TEMPLATE_PATH","robotsRendering","req","res","settings","retrieve","then","readFile","resolve","err","data","status","end","robots","replace","settingsResponse","json","domain","header","send"],"mappings":";;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,uBAAuB,wBAA7B;;AAEA,IAAMC,kBAAkB,SAAlBA,eAAkB,CAACC,GAAD,EAAMC,GAAN,EAAc;AACrC,eAAIC,QAAJ,CAAaC,QAAb,GAAwBC,IAAxB,CAA6B,4BAAoB;AAChD,eAAGC,QAAH,CAAY,eAAKC,OAAL,CAAaR,oBAAb,CAAZ,EAAgD,MAAhD,EAAwD,UAACS,GAAD,EAAMC,IAAN,EAAe;AACtE,OAAID,GAAJ,EAAS;AACRN,QAAIQ,MAAJ,CAAW,GAAX,EAAgBC,GAAhB;AACA,IAFD,MAEO;AACN,QAAMC,SAASH,KAAKI,OAAL,CAAa,WAAb,EAA0BC,iBAAiBC,IAAjB,CAAsBC,MAAhD,CAAf;AACAd,QAAIe,MAAJ,CAAW,cAAX,EAA2B,YAA3B;AACAf,QAAIgB,IAAJ,CAASN,MAAT;AACA;AACD,GARD;AASA,EAVD;AAWA,CAZD;;kBAceZ,e","file":"robotsRendering.js","sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport api from './api';\n\nconst ROBOTS_TEMPLATE_PATH = 'public/robots.template';\n\nconst robotsRendering = (req, res) => {\n\tapi.settings.retrieve().then(settingsResponse => {\n\t\tfs.readFile(path.resolve(ROBOTS_TEMPLATE_PATH), 'utf8', (err, data) => {\n\t\t\tif (err) {\n\t\t\t\tres.status(500).end();\n\t\t\t} else {\n\t\t\t\tconst robots = data.replace(/{domain}/g, settingsResponse.json.domain);\n\t\t\t\tres.header('Content-Type', 'text/plain');\n\t\t\t\tres.send(robots);\n\t\t\t}\n\t\t});\n\t});\n};\n\nexport default robotsRendering;\n"]}