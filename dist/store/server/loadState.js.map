{"version":3,"sources":["../../../src/store/server/loadState.js"],"names":["themeLocales","PRODUCT_FIELDS","CATEGORIES_FIELDS","getCurrentPage","sitemap","retrieve","path","enabled","then","sitemapResponse","status","json","type","resource","Promise","reject","getProducts","currentPage","productFilter","filter","products","list","getProduct","getPage","pages","getThemeSettings","theme","settings","catch","getAllData","cookie","all","checkoutFields","productCategories","fields","ajax","cart","categories","product","page","themeSettings","categoryDetails","find","c","id","getState","allData","location","productsTotalCount","productsHasMore","productsMinPrice","productsMaxPrice","productsAttributes","total_count","has_more","attributes","price","min","max","state","app","pageDetails","productDetails","data","paymentMethods","shippingMethods","loadingProducts","loadingMoreProducts","loadingShippingMethods","loadingPaymentMethods","processingCheckout","onSale","search","categoryId","priceFrom","priceTo","sort","default_product_sorting","product_fields","limit","products_limit","order","getFilter","urlQuery","loadState","req","language","get","urlPath","url","includes","substring","indexOf","hasHistory","pathname","hash","getText","placeholders","themeText","placeholdersResponse"],"mappings":"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","file":"loadState.js","sourcesContent":["import api from './api';\nimport queryString from 'query-string';\nimport {\n\tgetParsedProductFilter,\n\tgetProductFilterForCategory,\n\tgetProductFilterForSearch\n} from '../shared/actions';\nimport * as themeLocales from './themeLocales';\nimport {\n\tPAGE,\n\tPRODUCT_CATEGORY,\n\tPRODUCT,\n\tRESERVED,\n\tSEARCH\n} from '../shared/pageTypes';\n\nconst PRODUCT_FIELDS =\n\t'path,id,name,category_id,category_ids,category_name,sku,images,enabled,discontinued,stock_status,stock_quantity,price,on_sale,regular_price,attributes,tags,position';\nconst CATEGORIES_FIELDS =\n\t'image,name,description,meta_description,meta_title,sort,parent_id,position,slug,id';\n\nconst getCurrentPage = path => {\n\treturn api.sitemap\n\t\t.retrieve({ path: path, enabled: true })\n\t\t.then(sitemapResponse => {\n\t\t\tif (sitemapResponse.status === 200) {\n\t\t\t\treturn sitemapResponse.json;\n\t\t\t} else if (sitemapResponse.status === 404) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 404,\n\t\t\t\t\tpath: path,\n\t\t\t\t\tresource: null\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn Promise.reject(`Page response code = ${sitemapResponse.status}`);\n\t\t\t}\n\t\t});\n};\n\nconst getProducts = (currentPage, productFilter) => {\n\tif (currentPage.type === PRODUCT_CATEGORY || currentPage.type === SEARCH) {\n\t\tlet filter = getParsedProductFilter(productFilter);\n\t\tfilter.enabled = true;\n\t\treturn api.products.list(filter).then(({ status, json }) => json);\n\t} else {\n\t\treturn null;\n\t}\n};\n\nconst getProduct = currentPage => {\n\tif (currentPage.type === PRODUCT) {\n\t\treturn api.products\n\t\t\t.retrieve(currentPage.resource)\n\t\t\t.then(({ status, json }) => json);\n\t} else {\n\t\treturn {};\n\t}\n};\n\nconst getPage = currentPage => {\n\tif (currentPage.type === PAGE) {\n\t\treturn api.pages\n\t\t\t.retrieve(currentPage.resource)\n\t\t\t.then(({ status, json }) => json);\n\t} else {\n\t\treturn {};\n\t}\n};\n\nconst getThemeSettings = () => {\n\treturn api.theme.settings\n\t\t.retrieve()\n\t\t.then(({ status, json }) => json)\n\t\t.catch(err => ({}));\n};\n\nconst getAllData = (currentPage, productFilter, cookie) => {\n\treturn Promise.all([\n\t\tapi.checkoutFields.list().then(({ status, json }) => json),\n\t\tapi.productCategories\n\t\t\t.list({ enabled: true, fields: CATEGORIES_FIELDS })\n\t\t\t.then(({ status, json }) => json),\n\t\tapi.ajax.cart.retrieve(cookie).then(({ status, json }) => json),\n\t\tgetProducts(currentPage, productFilter),\n\t\tgetProduct(currentPage),\n\t\tgetPage(currentPage),\n\t\tgetThemeSettings()\n\t]).then(\n\t\t([\n\t\t\tcheckoutFields,\n\t\t\tcategories,\n\t\t\tcart,\n\t\t\tproducts,\n\t\t\tproduct,\n\t\t\tpage,\n\t\t\tthemeSettings\n\t\t]) => {\n\t\t\tlet categoryDetails = null;\n\t\t\tif (currentPage.type === PRODUCT_CATEGORY) {\n\t\t\t\tcategoryDetails = categories.find(c => c.id === currentPage.resource);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tcheckoutFields,\n\t\t\t\tcategories,\n\t\t\t\tcart,\n\t\t\t\tproducts,\n\t\t\t\tproduct,\n\t\t\t\tpage,\n\t\t\t\tcategoryDetails,\n\t\t\t\tthemeSettings\n\t\t\t};\n\t\t}\n\t);\n};\n\nconst getState = (currentPage, settings, allData, location, productFilter) => {\n\tconst {\n\t\tcheckoutFields,\n\t\tcategories,\n\t\tcart,\n\t\tproducts,\n\t\tproduct,\n\t\tpage,\n\t\tcategoryDetails,\n\t\tthemeSettings\n\t} = allData;\n\n\tlet productsTotalCount = 0;\n\tlet productsHasMore = false;\n\tlet productsMinPrice = 0;\n\tlet productsMaxPrice = 0;\n\tlet productsAttributes = [];\n\n\tif (products) {\n\t\tproductsTotalCount = products.total_count;\n\t\tproductsHasMore = products.has_more;\n\t\tproductsAttributes = products.attributes;\n\n\t\tif (products.price) {\n\t\t\tproductsMinPrice = products.price.min;\n\t\t\tproductsMaxPrice = products.price.max;\n\t\t}\n\t}\n\n\tconst state = {\n\t\tapp: {\n\t\t\tsettings: settings,\n\t\t\tlocation: location,\n\t\t\tcurrentPage: currentPage,\n\t\t\tpageDetails: page,\n\t\t\tcategoryDetails: categoryDetails,\n\t\t\tproductDetails: product,\n\t\t\tcategories: categories,\n\t\t\tproducts: products && products.data ? products.data : [],\n\t\t\tproductsTotalCount: productsTotalCount,\n\t\t\tproductsHasMore: productsHasMore,\n\t\t\tproductsMinPrice: productsMinPrice,\n\t\t\tproductsMaxPrice: productsMaxPrice,\n\t\t\tproductsAttributes: productsAttributes,\n\t\t\tpaymentMethods: [],\n\t\t\tshippingMethods: [],\n\t\t\tloadingProducts: false,\n\t\t\tloadingMoreProducts: false,\n\t\t\tloadingShippingMethods: false,\n\t\t\tloadingPaymentMethods: false,\n\t\t\tprocessingCheckout: false,\n\t\t\tproductFilter: {\n\t\t\t\tonSale: null,\n\t\t\t\tsearch: productFilter.search || '',\n\t\t\t\tcategoryId: productFilter.categoryId,\n\t\t\t\tpriceFrom: productFilter.priceFrom || 0,\n\t\t\t\tpriceTo: productFilter.priceTo || 0,\n\t\t\t\tattributes: productFilter.attributes,\n\t\t\t\tsort: settings.default_product_sorting,\n\t\t\t\tfields:\n\t\t\t\t\tsettings.product_fields && settings.product_fields !== ''\n\t\t\t\t\t\t? settings.product_fields\n\t\t\t\t\t\t: PRODUCT_FIELDS,\n\t\t\t\tlimit:\n\t\t\t\t\tsettings.products_limit && settings.products_limit !== 0\n\t\t\t\t\t\t? settings.products_limit\n\t\t\t\t\t\t: 30\n\t\t\t},\n\t\t\tcart: cart,\n\t\t\torder: null,\n\t\t\tcheckoutFields: checkoutFields,\n\t\t\tthemeSettings: themeSettings\n\t\t}\n\t};\n\n\treturn state;\n};\n\nconst getFilter = (currentPage, urlQuery, settings) => {\n\tlet productFilter = {};\n\n\tif (currentPage.type === PRODUCT_CATEGORY) {\n\t\tproductFilter = getProductFilterForCategory(\n\t\t\turlQuery,\n\t\t\tsettings.default_product_sorting\n\t\t);\n\t\tproductFilter.categoryId = currentPage.resource;\n\t} else if (currentPage.type === SEARCH) {\n\t\tproductFilter = getProductFilterForSearch(urlQuery);\n\t}\n\n\tproductFilter.fields =\n\t\tsettings.product_fields && settings.product_fields !== ''\n\t\t\t? settings.product_fields\n\t\t\t: PRODUCT_FIELDS;\n\tproductFilter.limit =\n\t\tsettings.products_limit && settings.products_limit !== 0\n\t\t\t? settings.products_limit\n\t\t\t: 30;\n\n\treturn productFilter;\n};\n\nexport const loadState = (req, language) => {\n\tconst cookie = req.get('cookie');\n\tconst urlPath = req.path;\n\tconst urlQuery = req.url.includes('?')\n\t\t? req.url.substring(req.url.indexOf('?'))\n\t\t: '';\n\tconst location = {\n\t\thasHistory: false,\n\t\tpathname: urlPath,\n\t\tsearch: urlQuery,\n\t\thash: ''\n\t};\n\n\treturn Promise.all([\n\t\tgetCurrentPage(req.path),\n\t\tapi.settings.retrieve().then(({ status, json }) => json),\n\t\tthemeLocales.getText(language),\n\t\tapi.theme.placeholders.list()\n\t]).then(([currentPage, settings, themeText, placeholdersResponse]) => {\n\t\tconst productFilter = getFilter(currentPage, urlQuery, settings);\n\n\t\treturn getAllData(currentPage, productFilter, cookie).then(allData => {\n\t\t\tconst state = getState(\n\t\t\t\tcurrentPage,\n\t\t\t\tsettings,\n\t\t\t\tallData,\n\t\t\t\tlocation,\n\t\t\t\tproductFilter\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tstate: state,\n\t\t\t\tthemeText: themeText,\n\t\t\t\tplaceholders: placeholdersResponse.json\n\t\t\t};\n\t\t});\n\t});\n};\n"]}