{"version":3,"sources":["../../../../src/components/checkoutForm/paymentForm/index.js"],"names":["PaymentForm","props","fetchFormSettings","setState","loading","ajax","paymentFormSettings","retrieve","then","status","json","formSettings","catch","console","log","e","state","componentDidMount","componentWillReceiveProps","nextProps","gateway","amount","shouldComponentUpdate","nextState","render","shopSettings","onPayment","onCreateToken","Component"],"mappings":";;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;IAEqBA,W;;;AACpB,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA,6DAClB,4BAAMA,KAAN,CADkB;;AAAA,QAQnBC,iBARmB,GAQC,YAAM;AACzB,SAAKC,QAAL,CAAc;AACbC,aAAS;AADI,IAAd;;AAIA,iBAAIC,IAAJ,CAASC,mBAAT,CACEC,QADF,GAEEC,IAFF,CAEO,gBAAsB;AAAA,QAAnBC,MAAmB,QAAnBA,MAAmB;AAAA,QAAXC,IAAW,QAAXA,IAAW;;AAC3B,UAAKP,QAAL,CAAc;AACbQ,mBAAcD,IADD;AAEbN,cAAS;AAFI,KAAd;AAIA,IAPF,EAQEQ,KARF,CAQQ,aAAK;AACX,UAAKT,QAAL,CAAc;AACbQ,mBAAc,IADD;AAEbP,cAAS;AAFI,KAAd;AAIAS,YAAQC,GAAR,CAAYC,CAAZ;AACA,IAdF;AAeA,GA5BkB;;AAElB,QAAKC,KAAL,GAAa;AACZL,iBAAc,IADF;AAEZP,YAAS;AAFG,GAAb;AAFkB;AAMlB;;uBAwBDa,iB,gCAAoB;AACnB,OAAKf,iBAAL;AACA,E;;uBAEDgB,yB,sCAA0BC,S,EAAW;AACpC,MACCA,UAAUC,OAAV,KAAsB,KAAKnB,KAAL,CAAWmB,OAAjC,IACAD,UAAUE,MAAV,KAAqB,KAAKpB,KAAL,CAAWoB,MAFjC,EAGE;AACD,QAAKnB,iBAAL;AACA;AACD,E;;uBAEDoB,qB,kCAAsBH,S,EAAWI,S,EAAW;AAC3C,SACCJ,UAAUC,OAAV,KAAsB,KAAKnB,KAAL,CAAWmB,OAAjC,IACAD,UAAUE,MAAV,KAAqB,KAAKpB,KAAL,CAAWoB,MADhC,IAEA,KAAKL,KAAL,KAAeO,SAHhB;AAKA,E;;uBAEDC,M,qBAAS;AAAA,eACoD,KAAKvB,KADzD;AAAA,MACAmB,OADA,UACAA,OADA;AAAA,MACSK,YADT,UACSA,YADT;AAAA,MACuBC,SADvB,UACuBA,SADvB;AAAA,MACkCC,aADlC,UACkCA,aADlC;AAAA,eAE0B,KAAKX,KAF/B;AAAA,MAEAL,YAFA,UAEAA,YAFA;AAAA,MAEcP,OAFd,UAEcA,OAFd;;;AAIR,MAAIA,OAAJ,EAAa;AACZ,UAAO,IAAP;AACA,GAFD,MAEO,IAAIO,gBAAgBS,OAAhB,IAA2BA,YAAY,EAA3C,EAA+C;AACrD,WAAQA,OAAR;AACC,SAAK,iBAAL;AACC,YACC;AAAA;AAAA,QAAK,WAAU,cAAf;AACC;AACC,qBAAcT,YADf;AAEC,qBAAcc,YAFf;AAGC,kBAAWC;AAHZ;AADD,MADD;AASD,SAAK,QAAL;AACC,YACC;AAAA;AAAA,QAAK,WAAU,cAAf;AACC;AACC,qBAAcf,YADf;AAEC,qBAAcc,YAFf;AAGC,kBAAWC;AAHZ;AADD,MADD;AASD,SAAK,iBAAL;AACC,YACC;AAAA;AAAA,QAAK,WAAU,cAAf;AACC;AACC,qBAAcf,YADf;AAEC,qBAAcc,YAFf;AAGC,kBAAWC,SAHZ;AAIC,sBAAeC;AAJhB;AADD,MADD;AAUD;AACC,YACC;AAAA;AAAA;AAAA;AACiB;AAAA;AAAA;AAAIP;AAAJ,OADjB;AAAA;AAAA,MADD;AAjCF;AAuCA,GAxCM,MAwCA;AACN,UAAO,IAAP;AACA;AACD,E;;;EArGuC,gBAAMQ,S;;kBAA1B5B,W","file":"index.js","sourcesContent":["import React from 'react';\nimport api from '../../../lib/api';\nimport PayPalCheckout from './PayPalCheckout';\nimport LiqPay from './LiqPay';\nimport StripeElements from './StripeElements';\n\nexport default class PaymentForm extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tformSettings: null,\n\t\t\tloading: false\n\t\t};\n\t}\n\n\tfetchFormSettings = () => {\n\t\tthis.setState({\n\t\t\tloading: true\n\t\t});\n\n\t\tapi.ajax.paymentFormSettings\n\t\t\t.retrieve()\n\t\t\t.then(({ status, json }) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tformSettings: json,\n\t\t\t\t\tloading: false\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(e => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tformSettings: null,\n\t\t\t\t\tloading: false\n\t\t\t\t});\n\t\t\t\tconsole.log(e);\n\t\t\t});\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.fetchFormSettings();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (\n\t\t\tnextProps.gateway !== this.props.gateway ||\n\t\t\tnextProps.amount !== this.props.amount\n\t\t) {\n\t\t\tthis.fetchFormSettings();\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps, nextState) {\n\t\treturn (\n\t\t\tnextProps.gateway !== this.props.gateway ||\n\t\t\tnextProps.amount !== this.props.amount ||\n\t\t\tthis.state !== nextState\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { gateway, shopSettings, onPayment, onCreateToken } = this.props;\n\t\tconst { formSettings, loading } = this.state;\n\n\t\tif (loading) {\n\t\t\treturn null;\n\t\t} else if (formSettings && gateway && gateway !== '') {\n\t\t\tswitch (gateway) {\n\t\t\t\tcase 'paypal-checkout':\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"payment-form\">\n\t\t\t\t\t\t\t<PayPalCheckout\n\t\t\t\t\t\t\t\tformSettings={formSettings}\n\t\t\t\t\t\t\t\tshopSettings={shopSettings}\n\t\t\t\t\t\t\t\tonPayment={onPayment}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tcase 'liqpay':\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"payment-form\">\n\t\t\t\t\t\t\t<LiqPay\n\t\t\t\t\t\t\t\tformSettings={formSettings}\n\t\t\t\t\t\t\t\tshopSettings={shopSettings}\n\t\t\t\t\t\t\t\tonPayment={onPayment}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tcase 'stripe-elements':\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"payment-form\">\n\t\t\t\t\t\t\t<StripeElements\n\t\t\t\t\t\t\t\tformSettings={formSettings}\n\t\t\t\t\t\t\t\tshopSettings={shopSettings}\n\t\t\t\t\t\t\t\tonPayment={onPayment}\n\t\t\t\t\t\t\t\tonCreateToken={onCreateToken}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tdefault:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\tPayment Gateway <b>{gateway}</b> not found!\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n"]}