{"version":3,"sources":["../../../src/components/productDetails/index.js"],"names":["helper","Description","description","__html","ProductDetails","props","setQuantity","setState","quantity","state","selectedOptions","selectedVariant","isAllOptionsSelected","onOptionChange","bind","findVariantBySelectedOptions","addToCart","checkSelectedOptions","optionId","valueId","product","variants","variant","variantMutchSelectedOptions","options","every","variantOption","option_id","value_id","addCartItem","item","product_id","id","variant_id","allOptionsSelected","Object","keys","length","render","settings","categories","maxQuantity","stock_status","stock_backorder","maxCartItemQty","stock_quantity","show_product_breadcrumbs","images","tags","name","show_discount_countdown","on_sale","attributes","related_product_ids","show_viewed_products","limit_viewed_products","disqus_shortname","url","Component"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Fragment } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport * as helper from '../../lib/helper';\nimport { themeSettings, text } from '../../lib/settings';\nimport Disqus from '../comments/disqus';\nimport ViewedProducts from '../products/viewed';\nimport Breadcrumbs from './breadcrumbs';\nimport DiscountCountdown from './discountCountdown';\nimport AddToCartButton from './addToCartButton';\nimport Attributes from './attributes';\nimport Gallery from './gallery';\nimport Options from './options';\nimport Price from './price';\nimport Quantity from './quantity';\nimport RelatedProducts from './relatedProducts';\nimport Tags from './tags';\n\nconst Description = ({ description }) => (\n\t<div\n\t\tclassName=\"product-content\"\n\t\tdangerouslySetInnerHTML={{ __html: description }}\n\t/>\n);\n\nexport default class ProductDetails extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tselectedOptions: {},\n\t\t\tselectedVariant: null,\n\t\t\tisAllOptionsSelected: false,\n\t\t\tquantity: 1\n\t\t};\n\n\t\tthis.onOptionChange = this.onOptionChange.bind(this);\n\t\tthis.findVariantBySelectedOptions = this.findVariantBySelectedOptions.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.addToCart = this.addToCart.bind(this);\n\t\tthis.checkSelectedOptions = this.checkSelectedOptions.bind(this);\n\t}\n\n\tonOptionChange(optionId, valueId) {\n\t\tlet { selectedOptions } = this.state;\n\n\t\tif (valueId === '') {\n\t\t\tdelete selectedOptions[optionId];\n\t\t} else {\n\t\t\tselectedOptions[optionId] = valueId;\n\t\t}\n\n\t\tthis.setState({ selectedOptions: selectedOptions });\n\t\tthis.findVariantBySelectedOptions();\n\t\tthis.checkSelectedOptions();\n\t}\n\n\tfindVariantBySelectedOptions() {\n\t\tconst { selectedOptions } = this.state;\n\t\tconst { product } = this.props;\n\t\tfor (const variant of product.variants) {\n\t\t\tconst variantMutchSelectedOptions = variant.options.every(\n\t\t\t\tvariantOption =>\n\t\t\t\t\tselectedOptions[variantOption.option_id] === variantOption.value_id\n\t\t\t);\n\t\t\tif (variantMutchSelectedOptions) {\n\t\t\t\tthis.setState({ selectedVariant: variant });\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.setState({ selectedVariant: null });\n\t}\n\n\tsetQuantity = quantity => {\n\t\tthis.setState({ quantity: quantity });\n\t};\n\n\taddToCart() {\n\t\tconst { product, addCartItem } = this.props;\n\t\tconst { selectedVariant, quantity } = this.state;\n\n\t\tlet item = {\n\t\t\tproduct_id: product.id,\n\t\t\tquantity: quantity\n\t\t};\n\n\t\tif (selectedVariant) {\n\t\t\titem.variant_id = selectedVariant.id;\n\t\t}\n\n\t\taddCartItem(item);\n\t}\n\n\tcheckSelectedOptions() {\n\t\tconst { selectedOptions } = this.state;\n\t\tconst { product } = this.props;\n\n\t\tconst allOptionsSelected =\n\t\t\tObject.keys(selectedOptions).length === product.options.length;\n\t\tthis.setState({ isAllOptionsSelected: allOptionsSelected });\n\t}\n\n\trender() {\n\t\tconst { product, settings, categories } = this.props;\n\t\tconst { selectedVariant, isAllOptionsSelected } = this.state;\n\t\tconst maxQuantity =\n\t\t\tproduct.stock_status === 'discontinued'\n\t\t\t\t? 0\n\t\t\t\t: product.stock_backorder\n\t\t\t\t\t? themeSettings.maxCartItemQty\n\t\t\t\t\t: selectedVariant\n\t\t\t\t\t\t? selectedVariant.stock_quantity\n\t\t\t\t\t\t: product.stock_quantity;\n\n\t\tif (product) {\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<section className=\"section section-product\">\n\t\t\t\t\t\t<div className=\"container\">\n\t\t\t\t\t\t\t<div className=\"columns\">\n\t\t\t\t\t\t\t\t<div className=\"column is-7\">\n\t\t\t\t\t\t\t\t\t{themeSettings.show_product_breadcrumbs && (\n\t\t\t\t\t\t\t\t\t\t<Breadcrumbs product={product} categories={categories} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<Gallery images={product.images} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"column is-5\">\n\t\t\t\t\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t\t\t\t\t<Tags tags={product.tags} />\n\t\t\t\t\t\t\t\t\t\t<h1 className=\"title is-4 product-name\">{product.name}</h1>\n\t\t\t\t\t\t\t\t\t\t<Price\n\t\t\t\t\t\t\t\t\t\t\tproduct={product}\n\t\t\t\t\t\t\t\t\t\t\tvariant={selectedVariant}\n\t\t\t\t\t\t\t\t\t\t\tisAllOptionsSelected={isAllOptionsSelected}\n\t\t\t\t\t\t\t\t\t\t\tsettings={settings}\n\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t{themeSettings.show_discount_countdown &&\n\t\t\t\t\t\t\t\t\t\t\tproduct.on_sale === true && (\n\t\t\t\t\t\t\t\t\t\t\t\t<DiscountCountdown product={product} />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t<Options\n\t\t\t\t\t\t\t\t\t\t\toptions={product.options}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.onOptionChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Quantity\n\t\t\t\t\t\t\t\t\t\t\tmaxQuantity={maxQuantity}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.setQuantity}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div className=\"button-addtocart\">\n\t\t\t\t\t\t\t\t\t\t\t<AddToCartButton\n\t\t\t\t\t\t\t\t\t\t\t\tproduct={product}\n\t\t\t\t\t\t\t\t\t\t\t\tvariant={selectedVariant}\n\t\t\t\t\t\t\t\t\t\t\t\taddCartItem={this.addToCart}\n\t\t\t\t\t\t\t\t\t\t\t\tisAllOptionsSelected={isAllOptionsSelected}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\n\t\t\t\t\t<section className=\"section section-product-description\">\n\t\t\t\t\t\t<div className=\"container\">\n\t\t\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t\t\t<div className=\"columns\">\n\t\t\t\t\t\t\t\t\t<div className=\"column is-7\">\n\t\t\t\t\t\t\t\t\t\t<Description description={product.description} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"column is-5\">\n\t\t\t\t\t\t\t\t\t\t<Attributes attributes={product.attributes} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\n\t\t\t\t\t<RelatedProducts\n\t\t\t\t\t\tsettings={settings}\n\t\t\t\t\t\taddCartItem={this.addToCart}\n\t\t\t\t\t\tids={product.related_product_ids}\n\t\t\t\t\t\tlimit={10}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{themeSettings.show_viewed_products && (\n\t\t\t\t\t\t<ViewedProducts\n\t\t\t\t\t\t\tsettings={settings}\n\t\t\t\t\t\t\taddCartItem={this.addToCart}\n\t\t\t\t\t\t\tproduct={product}\n\t\t\t\t\t\t\tlimit={themeSettings.limit_viewed_products || 4}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{themeSettings.disqus_shortname &&\n\t\t\t\t\t\tthemeSettings.disqus_shortname !== '' && (\n\t\t\t\t\t\t\t<section className=\"section\">\n\t\t\t\t\t\t\t\t<div className=\"container\">\n\t\t\t\t\t\t\t\t\t<Disqus\n\t\t\t\t\t\t\t\t\t\tshortname={themeSettings.disqus_shortname}\n\t\t\t\t\t\t\t\t\t\tidentifier={product.id}\n\t\t\t\t\t\t\t\t\t\ttitle={product.name}\n\t\t\t\t\t\t\t\t\t\turl={product.url}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t)}\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n"]}